<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Achievements</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        button {
            margin-right: 10px;
            padding: 6px 12px;
            cursor: pointer;
        }

        table {
            border-collapse: collapse;
            width: 900px;
            margin-top: 15px;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 8px 12px;
            vertical-align: middle;
        }

        th {
            background-color: #f4f4f4;
        }

        img.icon {
            width: 32px;
            height: 32px;
            vertical-align: middle;
            margin-right: 6px;
        }
    </style>
</head>
<body>

<h2>Achievements</h2>

<div>
    <button onclick="loadFile('Achievements_deDE.txt')">German</button>
    <button onclick="loadFile('Achievements_enUS.txt')">English</button>
</div>

<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Icon</th>
            <th>Name</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody id="achievementTable"></tbody>
</table>

<script>
function loadFile(filename) {
    fetch(filename)
        .then(response => response.text())
        .then(text => {
            const tbody = document.getElementById('achievementTable');
            tbody.innerHTML = '';

            const lines = text.trim().split('\n');

            // Skip header line
            lines.slice(1).forEach(line => {
                const parts = line.split(';').map(p => p.trim());
                if (parts.length < 4) return;

                const [id, name, description, icon] = parts;

                // Remove leading "-" from icon name
                const iconName = icon.replace(/^-/, '').toLowerCase();

                const iconUrl =
                    `https://render.worldofwarcraft.com/us/icons/56/${iconName}.jpg`;

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${id}</td>
                    <td>
                        <img class="icon"
                             src="${iconUrl}"
                             alt="${name}"
                             loading="lazy"
                             onerror="this.style.display='none'">
                    </td>
                    <td>${name}</td>
                    <td>${description}</td>
                `;

                tbody.appendChild(row);
            });
        })
        .catch(err => console.error('Failed to load file:', err));
}

// Load default language on page load
loadFile('Achievements_deDE.txt');
</script>

</body>
</html>